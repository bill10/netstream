<!-- START SIGMA IMPORTS -->

<!-- END SIGMA IMPORTS -->
<div id="container">
  <style>
    #graph-container {
      top: 0;
      bottom: 0;
      left: 0;
      right: 0;
      position: absolute;
    }
  </style>
  <div id="graph-container"></div>
</div>
<script src="js/socket.io.js"></script>
<script src="js/sigma.min.js"></script>
<script src="js/sigma.layout.forceAtlas2.min.js"></script>

<script>

var socket = io.connect('http://localhost:5000');
var s = new sigma('graph-container');
s.startForceAtlas2();

socket.on('an',function(data){
    s.graph.addNode({id: data.id, label: data.label, size: data.size, x:data.x, y: data.y});
    s.refresh();
    s.killForceAtlas2();
    s.startForceAtlas2();
});

socket.on('ae',function(data){
    s.graph.addEdge({id: data.id, source: data.source, target: data.target});
    s.refresh();
    s.killForceAtlas2();
    s.startForceAtlas2();
});

timer=setInterval(function(){
    socket.emit('GET','')
}, 500);

socket.on('none',function(data){
    s.stopForceAtlas2();
    clearInterval(timer);
});
</script>
